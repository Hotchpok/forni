# Определяем функцию counting_sort для сортировки чисел методом подсчета
def counting_sort(numbers):
    # Проверяем, не пустой ли список numbers
    if not numbers:
        # Если список пуст, возвращаем пустой список
        return []

    # Находим минимальное число в списке для нормализации индексов
    min_num = min(numbers)
    # Находим максимальное число в списке для определения размера массива подсчета
    max_num = max(numbers)

    # Создаем массив count для подсчета количества каждого числа
    # Размер массива: (max_num - min_num + 1) - чтобы охватить все числа от min до max
    count = [0] * (max_num - min_num + 1)

    # Проходим по всем числам входного списка
    for num in numbers:
        # Увеличиваем счетчик для текущего числа
        # Используем (num - min_num) для нормализации индекса (чтобы min_num соответствовал 0)
        count[num - min_num] += 1

    # Создаем пустой список для отсортированных чисел
    sorted_numbers = []
    # Проходим по всем индексам массива count
    for i in range(len(count)):
        # Добавляем число (i + min_num) в отсортированный список столько раз,
        # сколько оно встретилось во входных данных (count[i] раз)
        sorted_numbers.extend([i + min_num] * count[i])

    # Возвращаем отсортированный список
    return sorted_numbers


# Определяем основную функцию программы
def main():
    # Обрабатываем возможные исключения при работе с файлами
    try:
        # Открываем файл numbers.txt для чтения
        with open('numbers.txt', 'r') as file:
            # Читаем все содержимое файла в строку data
            data = file.read()
            # Преобразуем строку в список чисел:
            # split() разбивает строку по пробелам, map(int, ...) преобразует каждую подстроку в число
            numbers = list(map(int, data.split()))

        # Вызываем функцию counting_sort для сортировки списка чисел
        sorted_numbers = counting_sort(numbers)

        # Открываем файл result.txt для записи (если не существует - создается)
        with open('result.txt', 'w') as file:
            # Преобразуем отсортированные числа в строку (через пробел) и записываем в файл
            file.write(' '.join(map(str, sorted_numbers)))

        # Выводим сообщение об успешном завершении
        print("Сортировка завершена. Результат записан в result.txt")

    # Обрабатываем исключение, если файл не найден
    except FileNotFoundError:
        print("Файл numbers.txt не найден")

    # Обрабатываем исключение, если в файле не числовые данные
    except ValueError:
        print("Файл содержит некорректные данные (не числа)")
    # Обрабатываем любые другие исключения
    except Exception as e:
        # Выводим сообщение с информацией об ошибке
        print(f"Произошла ошибка: {e}")


# Проверяем, запущен ли скрипт напрямую (а не импортирован как модуль)
if __name__ == "__main__":
    # Если скрипт запущен напрямую, вызываем основную функцию
    main()
